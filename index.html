<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºè†³ç®¡å®¶ - æ™ºèƒ½é¥®é£Ÿç”Ÿæˆå™¨</title>
    <style>
        :root {
            --primary: #10b981; /* å¥åº·ç»¿ */
            --primary-dark: #059669;
            --bg: #f3f4f6;
            --text: #1f2937;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        header h1 {
            color: var(--primary-dark);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        header p {
            color: #6b7280;
        }

        /* Input Section */
        .card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
        }
        select, input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        .btn-primary:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }

        /* Results Section */
        .result-section {
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .meal-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
            transition: transform 0.2s;
        }
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .meal-header {
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }
        .meal-body {
            padding: 15px;
        }
        .meal-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .meal-stats {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 10px;
        }
        .tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        .tag {
            background: #ecfdf5;
            color: var(--primary-dark);
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Shopping List */
        .shopping-list ul {
            list-style: none;
            padding: 0;
            columns: 2; /* Two columns layout */
        }
        .shopping-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
        }
        .shopping-list input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading Spinner */
        .loader {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ¥— æ™ºè†³ç®¡å®¶</h1>
        <p>æ‚¨çš„ç§äºº AI è¥å…»è§„åˆ’å¸ˆ</p>
    </header>

    <div class="card">
        <div class="form-group">
            <label>æ‚¨çš„ä¸»è¦ç›®æ ‡</label>
            <select id="goalSelect">
                <option value="loss">å‡è„‚ (ä½å¡ / é«˜è›‹ç™½)</option>
                <option value="gain">å¢è‚Œ (é«˜ç¢³æ°´ / é«˜è›‹ç™½)</option>
                <option value="maintain">ç»´æŒå¥åº· (å‡è¡¡é¥®é£Ÿ)</option>
            </select>
        </div>
        <div class="form-group">
            <label>ç°æœ‰çš„çƒ¹é¥ªè®¾å¤‡</label>
            <select id="deviceSelect">
                <option value="all">å…¨å¥—å¨æˆ¿</option>
                <option value="simple">ä»…å¾®æ³¢ç‚‰/ç©ºæ°”ç‚¸é”…</option>
            </select>
        </div>
        <button class="btn-primary" onclick="generatePlan()" id="genBtn">ç”Ÿæˆä»Šæ—¥èœå•</button>
    </div>

    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>AI æ­£åœ¨åˆ†æè¥å…»æˆåˆ†...</p>
    </div>

    <div class="result-section" id="resultSection">
        
        <h3>ğŸ“… ä»Šæ—¥æ¨èé£Ÿè°±</h3>
        <div class="menu-grid" id="menuContainer">
            </div>

        <div class="card" style="background: #ecfdf5; border: 1px solid var(--primary);">
            <h4 style="margin:0 0 10px 0; color: var(--primary-dark);">ğŸ“Š è¥å…»æ€»è§ˆ</h4>
            <div id="nutritionSummary"></div>
        </div>

        <h3>ğŸ›’ æ™ºèƒ½é‡‡è´­æ¸…å•</h3>
        <div class="card shopping-list">
            <p style="color:#666; font-size:0.9rem; margin-top:0;">å·²ä¸ºæ‚¨è‡ªåŠ¨å»é‡åˆå¹¶åŸæ–™ï¼š</p>
            <ul id="shoppingListContainer">
                </ul>
        </div>
    </div>
</div>

<script>
    // --- æ¨¡æ‹Ÿæ•°æ®åº“ (Mock Data) ---
    const recipes = {
        breakfast: [
            { name: "å…¨éº¦é¸¡è›‹å·é¥¼", cal: 350, pro: 15, ingredients: ["å…¨éº¦é¥¼çš® x1", "é¸¡è›‹ x2", "ç”Ÿèœ x50g"], type: "loss" },
            { name: "ç‡•éº¦è“è“é…¸å¥¶æ¯", cal: 300, pro: 12, ingredients: ["å³é£Ÿç‡•éº¦ x40g", "å¸Œè…Šé…¸å¥¶ x100g", "è“è“ x20g"], type: "loss" },
            { name: "ç‰›è‚‰ä¸‰æ˜æ²»", cal: 500, pro: 30, ingredients: ["åå¸ x2", "ç‰›è‚‰ç‰‡ x100g", "èŠå£«ç‰‡ x1"], type: "gain" }
        ],
        lunch: [
            { name: "ç©ºæ°”ç‚¸é”…æ—¶è”¬é¸¡ä¸", cal: 450, pro: 35, ingredients: ["é¸¡èƒ¸è‚‰ x200g", "å½©æ¤’ x1", "è¥¿è‘«èŠ¦ x100g"], type: "simple" },
            { name: "è—œéº¦ä¸‰æ–‡é±¼ç¢—", cal: 550, pro: 30, ingredients: ["ä¸‰æ–‡é±¼ x150g", "è—œéº¦é¥­ x150g", "ç‰›æ²¹æœ x0.5"], type: "all" },
            { name: "é»‘æ¤’ç‰›æŸ³æ„é¢", cal: 650, pro: 40, ingredients: ["æ„å¤§åˆ©é¢ x100g", "ç‰›æŸ³ x150g", "æ´‹è‘± x0.5"], type: "gain" }
        ],
        dinner: [
            { name: "é‡‘æªé±¼è½»é£Ÿæ²™æ‹‰", cal: 300, pro: 25, ingredients: ["é‡‘æªé±¼ç½å¤´ x1", "é»„ç“œ x1", "ç‰ç±³ç²’ x30g"], type: "loss" },
            { name: "ç•ªèŒ„è±†è…èŒè‡æ±¤", cal: 250, pro: 15, ingredients: ["å«©è±†è… x100g", "ç•ªèŒ„ x1", "é‡‘é’ˆè‡ x100g"], type: "loss" },
            { name: "å®¶å¸¸çº¢çƒ§è‚‰(å°‘æ²¹ç‰ˆ)", cal: 600, pro: 20, ingredients: ["äº”èŠ±è‚‰ x150g", "ç”ŸæŠ½", "è€æŠ½"], type: "gain" }
        ]
    };

    // --- æ ¸å¿ƒé€»è¾‘å‡½æ•° ---

    function generatePlan() {
        // 1. UI çŠ¶æ€æ§åˆ¶
        const loader = document.getElementById('loader');
        const results = document.getElementById('resultSection');
        const btn = document.getElementById('genBtn');
        
        btn.disabled = true;
        btn.innerText = "ç”Ÿæˆä¸­...";
        loader.style.display = 'block';
        results.style.display = 'none';

        // 2. è·å–ç”¨æˆ·è¾“å…¥
        const goal = document.getElementById('goalSelect').value;
        
        // 3. æ¨¡æ‹Ÿ AI æ€è€ƒå»¶è¿Ÿ (1ç§’)
        setTimeout(() => {
            // é€‰èœé€»è¾‘
            const b = pickRecipe(recipes.breakfast, goal);
            const l = pickRecipe(recipes.lunch, goal);
            const d = pickRecipe(recipes.dinner, goal);

            // æ¸²æŸ“èœå•
            renderMenu([
                { type: "æ—©é¤", ...b },
                { type: "åˆé¤", ...l },
                { type: "æ™šé¤", ...d }
            ]);

            // è®¡ç®—æ€»è¥å…»
            const totalCal = b.cal + l.cal + d.cal;
            const totalPro = b.pro + l.pro + d.pro;
            document.getElementById('nutritionSummary').innerHTML = 
                `<strong>æ€»çƒ­é‡:</strong> ${totalCal} kcal &nbsp;|&nbsp; <strong>è›‹ç™½è´¨:</strong> ${totalPro}g`;

            // ç”Ÿæˆé‡‡è´­å•
            const allIngredients = [...b.ingredients, ...l.ingredients, ...d.ingredients];
            renderShoppingList(allIngredients);

            // æ¢å¤ UI
            loader.style.display = 'none';
            results.style.display = 'block';
            btn.disabled = false;
            btn.innerText = "é‡æ–°ç”Ÿæˆ";
        }, 800);
    }

    // ç®€å•çš„ç­›é€‰é€»è¾‘
    function pickRecipe(list, goal) {
        // å¦‚æœæ˜¯å¢è‚Œï¼Œä¼˜å…ˆé€‰çƒ­é‡é«˜çš„ï¼›å‡è„‚é€‰çƒ­é‡ä½çš„ã€‚
        // è¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€åŒ–é€»è¾‘ï¼Œç›´æ¥éšæœºæˆ–è€…æŒ‰ç±»å‹ç­›é€‰
        let filtered = list;
        if (goal === 'loss') {
            filtered = list.filter(r => r.cal < 400 || r.type === 'loss');
        } else if (goal === 'gain') {
            filtered = list.filter(r => r.cal > 400 || r.type === 'gain');
        }
        
        // å¦‚æœç­›é€‰åæ²¡æœ‰ç»“æœï¼ˆæ•°æ®ä¸å¤Ÿï¼‰ï¼Œå°±é€€å›åˆ°æ•´ä¸ªåˆ—è¡¨
        if (filtered.length === 0) filtered = list;

        // éšæœºå–ä¸€ä¸ª
        return filtered[Math.floor(Math.random() * filtered.length)];
    }

    function renderMenu(meals) {
        const container = document.getElementById('menuContainer');
        container.innerHTML = '';

        meals.forEach(meal => {
            const html = `
                <div class="meal-card">
                    <div class="meal-header">
                        <span>${meal.type}</span>
                        <span>${meal.cal} kcal</span>
                    </div>
                    <div class="meal-body">
                        <div class="meal-title">${meal.name}</div>
                        <div class="meal-stats">è›‹ç™½è´¨: ${meal.pro}g</div>
                        <div class="tags">
                            ${meal.ingredients.slice(0, 3).map(i => `<span class="tag">${i.split(' ')[0]}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });
    }

    function renderShoppingList(ingredients) {
        const listContainer = document.getElementById('shoppingListContainer');
        listContainer.innerHTML = '';
        
        // è¿™é‡Œå¯ä»¥åšç®€å•çš„å»é‡é€»è¾‘ï¼Œè¿™é‡Œåšç›´æ¥å±•ç¤º
        const uniqueItems = [...new Set(ingredients)];

        uniqueItems.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = `<label><input type="checkbox"> ${item}</label>`;
            listContainer.appendChild(li);
        });
    }
</script>

</body>
</html>
